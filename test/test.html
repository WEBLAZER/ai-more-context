<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Page de test pour AI More Context">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI More Context - Test Page</title>
    <link rel="stylesheet" href="invalid-style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 20px;
        }
        .error {
            color: red;
        }
        .success {
            color: green;
        }
        /* Style invalide pour tester la capture d'erreurs CSS */
        .invalid-style {
            color: invalid-color;
            font-size: invalid-size;
        }
    </style>
</head>
<body>
    <h1>AI More Context Test Page</h1>
    <p>This page is designed to test various error capture scenarios.</p>

    <div class="test-section">
        <h2>Test des Erreurs</h2>
        <p>Les erreurs suivantes devraient être capturées :</p>
        <ul>
            <li>Image manquante</li>
            <li>Script manquant</li>
            <li>Style manquant</li>
            <li>Erreur JavaScript</li>
        </ul>
    </div>

    <!-- Erreurs de ressources -->
    <img src="invalid-image.jpg" alt="Invalid Image">
    <script src="invalid-script.js"></script>

    <!-- Erreurs JavaScript -->
    <script>
        // Erreur de variable non définie
        console.log(undefinedVariable);

        // Erreur de syntaxe
        try {
            eval('{invalid syntax}');
        } catch (e) {
            console.error('Syntax error:', e);
        }

        // Erreur de type
        try {
            null.someProperty;
        } catch (e) {
            console.error('Type error:', e);
        }

        // Erreur de performance (simulation)
        setTimeout(() => {
            const start = performance.now();
            while (performance.now() - start < 100) {
                // Boucle intensive
            }
        }, 0);

        // Test localStorage
        try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
        } catch (e) {
            console.error('localStorage error:', e);
        }

        // Test WebSocket
        try {
            const ws = new WebSocket('ws://invalid-websocket-url');
            ws.onerror = (e) => console.error('WebSocket error:', e);
        } catch (e) {
            console.error('WebSocket error:', e);
        }

        // Test Fetch
        fetch('invalid-url')
            .catch(e => console.error('Fetch error:', e));

        // Test XHR
        const xhr = new XMLHttpRequest();
        xhr.open('GET', 'invalid-url');
        xhr.onerror = (e) => console.error('XHR error:', e);
        xhr.send();

        // Test IndexedDB
        try {
            const request = indexedDB.open('test-db');
            request.onerror = (e) => console.error('IndexedDB error:', e);
        } catch (e) {
            console.error('IndexedDB error:', e);
        }

        // Test Web Worker
        try {
            const worker = new Worker('invalid-worker.js');
            worker.onerror = (e) => console.error('Web Worker error:', e);
        } catch (e) {
            console.error('Web Worker error:', e);
        }

        // Test WebGL
        try {
            const canvas = document.createElement('canvas');
            const gl = canvas.getContext('webgl');
            if (gl) {
                gl.getError(); // Force une erreur WebGL
            }
        } catch (e) {
            console.error('WebGL error:', e);
        }

        // Test Media
        try {
            const video = document.createElement('video');
            video.src = 'invalid-video.mp4';
            video.onerror = (e) => console.error('Media error:', e);
        } catch (e) {
            console.error('Media error:', e);
        }
    </script>

    <!-- Test de style invalide -->
    <div class="invalid-style">
        This text should trigger CSS errors
    </div>

    <!-- Test de média -->
    <video src="invalid-video.mp4" controls></video>
    <audio src="invalid-audio.mp3" controls></audio>
</body>
</html> 